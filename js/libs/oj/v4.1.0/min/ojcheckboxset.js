/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","ojs/ojradiocheckbox","ojs/ojoption"],function(a,g){(function(){a.hb("oj.ojCheckboxset",g.oj.editableValue,{version:"1.0.0",defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{disabled:!1,labelledBy:null,required:!1,value:void 0},refresh:function(){this._super();this.qb()},widget:function(){return this.p6a},validate:a.ia.validate,Ah:function(b,c){var e=[],f;f=[{Aa:"disabled",jf:!0},{Aa:"title"},{Aa:"required",ek:!0,jf:!0}];this._super(b,
c);this.Y()||a.ia.xs(f,c,this);this.Y()?this.M0(this.options.value):void 0===c.value?(this.ug=this.dR(),f=this.ug.filter(":checked"),0<f.length&&(f.each(function(){e.push(g(this).val())}),this.option("value",e,{_context:{ld:!0,mb:!0}})),void 0===this.options.value&&(this.options.value=[])):this.M0(this.options.value)},qc:function(){var a=this.element;this._super();if(a.is("fieldset"))throw Error("ojCheckboxset cannot be bound to a fieldset. Use a div instead.");a.uniqueId();this.Qr();this.ug=this.dR();
this.ug._ojRadioCheckbox().attr("data-oj-internal","");this.p6a=a.addClass("oj-checkboxset oj-component").attr("role","group");g(a.get(0).childNodes).filter(function(){return this.getAttribute&&"contextMenu"===this.getAttribute("slot")?!1:!0}).wrapAll("\x3cdiv class\x3d'oj-checkboxset-wrapper'\x3e\x3c/div\x3e");this._on(this.Ut);this.qb()},h_:function(){this.Qr();this.ug=this.dR();this.ug.filter(".oj-checkbox").each(function(){var a=void 0!==g(this).attr("disabled")?!!g(this).prop("disabled"):!1;
g(this)._ojRadioCheckbox("option","disabled",a)});this.ug.not(".oj-checkbox")._ojRadioCheckbox()},Focus:function(){this.ze().first().focus();return!0},k_:function(){},Vi:function(){return this.options.required},Ge:a.ia.Ge,bo:a.ia.bo,Qr:function(){if(this.Y()){var a,c,e=this.ur.bind(this),f=this.element.children("oj-option");if(0<f.length)for(a=0,c=f.length;a<c;a++)f[a].customOptionRenderer=e;f=this.element.children(".oj-checkboxset-wrapper").find("oj-option");if(0<f.length)for(a=0,c=f.length;a<c;a++)f[a].customOptionRenderer=
e}},ur:function(a){var c,e,f,h="OJ-CHECKBOXSET"==a.parentNode.nodeName;g(a).uniqueId();var k=a.getAttribute("id"),l=k+"|cb";h?(c=document.createElement("span"),e=document.createElement("input"),f=document.createElement("label"),c.setAttribute("class","oj-choice-item"),e.setAttribute("type","checkbox"),e.setAttribute("id",l),f.setAttribute("for",l),a.parentElement.insertBefore(c,a),f.appendChild(a),c.appendChild(e),c.appendChild(f)):e=document.getElementById(l);c=this.element[0].id;f=a.getAttribute("aria-label");
l=a.getAttribute("aria-labelledby");e.setAttribute("data-oj-option-id",k);c&&""!=c?e.setAttribute("name",c):e.removeAttribute("name");f&&""!=f?e.setAttribute("aria-label",f):e.removeAttribute("aria-label");l&&""!=l?e.setAttribute("aria-labelledby",l):e.removeAttribute("aria-labelledby");a.disabled?e.setAttribute("disabled",!0):e.removeAttribute("disabled");h||g(e)._ojRadioCheckbox("option","disabled",a.disabled)},bk:a.ia.bk,dR:function(){var b;b=this.element.find("input[type\x3dcheckbox]:first");
0===b.length&&a.D.warn("Could not find any input type\x3dcheckbox within this element");b=b.attr("name");return void 0===b?(b=this.element.find("input[type\x3dcheckbox]"),b.not("[name]")):this.element.find("input[type\x3dcheckbox][name\x3d"+b+"]")},Xi:function(a,c,e){a=this.element.find("input[type\x3dcheckbox]:tabbable").first();this.$i(c,e,{launcher:a})},_GetMessagingLauncherElement:function(){return this.widget()},qb:function(){this.ix(this.options.disabled);null!==this.ug&&(1===this.ug.length?
this.element.addClass("oj-checkboxset-single"):this.element.removeClass("oj-checkboxset-single"));this.element.hasClass("oj-choice-direction-column")||this.element.hasClass("oj-choice-direction-row")||this.element.addClass("oj-choice-direction-column");this.Ge(this.options.required);this.bk(null,this.options.labelledBy,this.widget())},Ut:{change:function(a){this.kP(a)}},M0:function(a){void 0===a?this.option("value",[],{_context:{ld:!0,mb:!0}}):this.pJa(a)},pJa:function(a){if(!Array.isArray(a))throw Error("Invalid 'value' set on JET Checkboxset: "+
a+".It must be an Array. ");},kP:function(a){var d;d=this.ug;0<d.length&&d.each(function(){this===a.target&&g(this)._ojRadioCheckbox("setSelectedClass",a.target.checked)});d=this.Ui();this.ic(d,a,c)},Ui:function(){return this.Rv()},Pk:function(a){var c,e=this.ug.length,f,h;this.M0(a);if(null===a||void 0===a||0===a.length)this.ug._ojRadioCheckbox("option","checked",!1);else for(c=0;c<e;c++){f=this.ug[c];h=g(f);f=this.st(f);f=this.Wda(a,f);var k=h._ojRadioCheckbox("option","checked");-1!==f?k||h._ojRadioCheckbox("option",
"checked",!0):k&&h._ojRadioCheckbox("option","checked",!1)}},Rv:function(){var a=this,c=[],e=this.ug.filter(":checked");if(0===e.length)return[];e.each(function(){c.push(a.st(this))});return c},Wda:function(b,c){var e=b.indexOf(c),f;if(-1==e){f=b.length;for(var g=0;g<f;g++)if(a.f.Eb(b[g],c)){e=g;break}}return e},st:function(a){var c;this.Y()?(a=document.getElementById(a.getAttribute("data-oj-option-id")))&&(c=a.value):c=a.value;return c},_GetDefaultStyleClass:function(){return"oj-checkboxset"},ze:function(){null==
this.ug&&(this.ug=this.dR());return this.ug},ez:function(){return!0},yg:a.ia.yg,ix:function(a){a=!!a;this.ug.each(function(){g(this).data("oj-_ojRadioCheckbox").nI(a)});this.ug._ojRadioCheckbox("refreshDisabled")},_setOption:function(a,c,e){var f=this.options.labelledBy;this._super(a,c,e);switch(a){case "disabled":this.ix(c);break;case "labelledBy":this.bk(f,c,this.widget())}},kt:function(a,c,e){this._superApply(arguments);switch(a){case "required":this.yg(a)}},getNodeBySubId:function(a){var c=this._super(a),
e,f;if(!c)switch(e=this.ug.get(),f=a.subId,f){case "oj-checkboxset-inputs":c=e;break;case "oj-checkboxset-checkbox":if(a=a.value,"undefined"!=typeof a){f=e.length;var g;g=-1;var k=[];for(g=0;g<f;g++)k[g]=this.st(e[g]);g=this.Wda(k,a);-1!==g&&(c=e[g])}}return c||null},getSubIdByNode:function(a){for(var c=this.ze()[0].parentElement.parentElement.parentElement,e=a;e&&e!=c;){"LABEL"==e.nodeName&&(e=document.getElementById(e["for"]));if("INPUT"==e.nodeName)return{subId:"oj-checkboxset-checkbox",value:this.st(e)};
e=e.parentElement}return this._super(a)},_destroy:function(){var a=this._super(),c=this.element[0].firstElementChild;this.ug&&this.ug._ojRadioCheckbox("destroy");g(c).contents().unwrap();return a}});var c={Qu:!1}})();a.J.Ua("oj-checkboxset","editableValue",{properties:{disabled:{type:"boolean"},labelledBy:{type:"string"},required:{type:"boolean"},value:{type:"Array"}},methods:{validate:{}},extension:{Xa:"ojCheckboxset"}});a.J.register("oj-checkboxset",{metadata:a.J.getMetadata("oj-checkboxset")})});