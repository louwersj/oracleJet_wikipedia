/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","hammerjs","promise","ojs/ojjquery-hammer","ojs/ojcomponentcore"],function(a,g,c){a.q={};o_("OffcanvasUtils",a.q,a);a.q.lZ="oj-offcanvasEdge";a.q.ot="oj-offcanvas";a.q.mZ="oj-mediaQueryListener";a.q.Bda="oj-offcanvasHammer";a.q.Cda="oj-offcanvasStyle";a.q.$y="selector";a.q.UG="content";a.q.Ly="start";a.q.Ky="end";a.q.ZG="top";a.q.$N="bottom";a.q.Gy="displayMode";a.q.Hy="push";a.q.$X="overlay";a.q.tba="pin";a.q.oBa="modality";a.q.K6a="none";a.q.pBa="modal";a.q.YN="_dismissHandler";
a.q.HY="_openPromise";a.q.TG="_closePromise";a.q.vC="_glassPane";a.q.Eca="_surrogate";a.q.QY="data-oj-offcanvas-surrogate-id";a.q.JBa="oj-offcanvas-outer-wrapper";a.q.yO="oj-offcanvas-open";a.q.Qi="oj-offcanvas-transition";a.q.MBa="oj-offcanvas-pin";a.q.LBa="oj-offcanvas-pin-transition";a.q.SAa="oj-offcanvas-glasspane";a.q.fO="oj-offcanvas-glasspane-dim";a.q.tCa="ojbeforeopen veto";a.q.sCa="ojbeforeclose veto";a.q.wYa={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",
bottom:"oj-offcanvas-shift-up"};a.q.ALa={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"};a.q.ZMa=function(b){b=b[a.q.Gy];b!==a.q.$X&&b!==a.q.Hy&&b!==a.q.tba&&(b=(a.gc.Yc("oj-offcanvas-option-defaults")||{}).displayMode);return b};a.q.cj=function(b){return g(b[a.q.$y])};a.q.oK=function(b){return b[a.q.oBa]===a.q.pBa};a.q.O4=function(b){return b.hasClass(a.q.yO)};a.q.dA=function(b){return b.closest("."+a.q.JBa)};a.q.mR=function(b){var c=a.q.cj(b);
return a.q.gpa(b)||b[a.q.Gy]===a.q.$X?c:c.parent()};a.q.qOa=function(b){var c=a.q.wYa[b];if(!c)throw"Invalid edge: "+b;return c};a.q.Kh=function(){return"rtl"===a.T.lj()};a.q.Xp=function(a,c){a.css({"-webkit-transform":c,transform:c})};a.q.B3=function(b,c,e){b=b===a.q.Ky;if(a.q.Kh()||e)b=!b;return"translate3d("+(b?"-":"")+c+", 0, 0)"};a.q.BL=function(b,c,e){a.q.Xp(b,a.q.B3(c,e,!1))};a.q.fma=function(b,c){return"translate3d(0, "+(b===a.q.$N?"-":"")+c+", 0)"};a.q.jYa=function(b,c,e){a.q.Xp(b,a.q.fma(c,
e))};a.q.gma=function(a,c){return"translate3d(0, "+(c?"-":"")+a+", 0)"};a.q.mXa=function(b,c,e){b.addClass(a.q.Qi);a.q.Xp(b,"translate3d(0, 0, 0)");c.addClass(a.q.Qi);a.q.Xp(c,e)};a.q.kra=function(b){var c=b.edge;b=a.q.cj(b);c&&c.length||(c=b.hasClass("oj-offcanvas-start")?a.q.Ly:b.hasClass("oj-offcanvas-end")?a.q.Ky:b.hasClass("oj-offcanvas-top")?a.q.ZG:b.hasClass("oj-offcanvas-bottom")?a.q.$N:a.q.Ly);g.data(b[0],a.q.lZ,c);return c};a.q.C2=function(b){return g.data(b[0],a.q.lZ)};a.q.kF=function(b,
c,e){var f=b[a.q.Gy],g=a.q.cj(b),k=a.q.yO,f=f===a.q.$X?a.q.Qi+" oj-offcanvas-overlay":a.q.Qi;e?(g.addClass(k),c.addClass(f)):(b.makeFocusable&&a.T.VW({element:g,remove:!0}),b=b.tabindex,void 0===b?g.removeAttr("tabindex"):g.attr("tabindex",b),g.removeClass(k),c.removeClass(f))};a.q.rn=function(b){var c=a.q.cj(b),e=c.find("[autofocus]");0==e.length&&(e=c.find(":tabbable"));0==e.length?(e=c.attr("tabindex"),void 0!==e&&(b.tabindex=e),c.attr("tabindex","-1"),e=c,a.T.VW({element:c,applyHighlight:!0}),
b.makeFocusable=!0):e=e[0];a.uf.tM(e)};a.q.eSa=function(a){return"none"!=a.autoDismiss};a.q.pIa=function(a){var c=a.css("transitionProperty").split(","),e=a.css("transitionDelay").split(",");a=a.css("transitionDuration").split(",");for(var f=0,g=0;g<c.length;g++){var k=a[g%a.length],k=-1<k.indexOf("ms")?parseFloat(k):1E3*parseFloat(k);if(0<k)var l=e[g%e.length],l=-1<l.indexOf("ms")?parseFloat(l):1E3*parseFloat(l),f=Math.max(f,l+k)}return f+100};a.q.mn=function(b,c){function e(){f&&(clearTimeout(f),
f=void 0);b.off("transitionend.oc webkitTransitionEnd.oc",e);c(b)}var f;b.on("transitionend.oc webkitTransitionEnd.oc",e);f=setTimeout(e,a.q.pIa(b))};a.q.Gha=function(b){a.q.close(b)["catch"](function(b){a.D.warn("Offcancas close failed: "+b)})};a.q.FT=function(b){a.q.R7(b);if(a.q.eSa(b)){var c=a.q.cj(b),e=b[a.q.YN]=function(e){var f=e.target;a.T.nxa(e)||"focus"===e.type&&!g(f).is(":focusable")||(null==g.data(c[0],a.q.ot)?a.q.R7(b):a.T.K3a(c[0],f)||a.q.Gha(b))},f=document.documentElement;a.T.ke()&&
f.addEventListener("touchstart",e,!0);f.addEventListener("mousedown",e,!0);f.addEventListener("focus",e,!0)}a.q.LE(b)};a.q.R7=function(b){var c=b[a.q.YN];if(c){var e=document.documentElement;a.T.ke()&&e.removeEventListener("touchstart",c,!0);e.removeEventListener("mousedown",c,!0);e.removeEventListener("focus",c,!0);delete b[a.q.YN];b[a.q.YN]=null}a.q.EU(b)};a.q.LE=function(b){if(a.T.ke()){var d=b[a.q.$y],e=g(d),f=a.q.C2(e),h,k;f===a.q.Ly&&!a.q.Kh()||f===a.q.Ky&&a.q.Kh()?(k={recognizers:[[c.Swipe,
{direction:c.DIRECTION_LEFT}]]},h="swipeleft"):f===a.q.Ly&&a.q.Kh()||f===a.q.Ky&&!a.q.Kh()?(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_RIGHT}]]},h="swiperight"):f===a.q.ZG?(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_UP}]]},h="swipeup"):f===a.q.$N&&(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_DOWN}]]},h="swipedown");f=e.Tg(k).on(h,function(c){c.target===e[0]&&(c.preventDefault(),a.q.Gha(b))});g.data(g(d)[0],a.q.Bda,{event:h,hammer:f})}};a.q.EU=function(b){b=a.q.cj(b);0<b.length&&(b=g.data(b[0],
a.q.Bda))&&b.hammer.off(b.event)};a.q.pSa=function(b){return a.q.dA(b).hasClass("oj-offcanvas-page")};a.q.S4=function(b){return b[a.q.Gy]===a.q.tba};a.q.gpa=function(b){return b[a.q.UG]||a.q.pSa(a.q.cj(b))||a.q.S4(b)};a.q.n8a=function(b){var c=b.attr("style");void 0!==c&&g.data(b[0],a.q.Cda,c)};a.q.VWa=function(b){var c=g.data(b[0],a.q.Cda);c?b.attr("style",c):b.removeAttr("style")};a.q.aB=function(b,c){var e=a.q.C2(b),e=a.q.qOa(e),f=a.q.dA(b);a.C.yf(f,g);var h=f.hasClass(e);c||f.toggleClass(e,!h);
return h};a.q.Ft=function(b){a.q.R7(b);var c=a.q.cj(b),e=a.q.S4(b),f=null;try{f=g.data(c[0],a.q.ot)}catch(h){}f===b&&(b._panInProgress||(a.q.C2(c),f=a.q.mR(b),e?c.removeClass(a.q.yO+" "+a.q.LBa):a.q.kF(b,f,!1),a.q.cWa(b),e&&(a.q.dA(c).removeClass(a.q.MBa),a.q.VWa(c)),c.trigger("ojclose",b)),g.removeData(c[0],a.q.ot))};a.q.lsa=function(b,c,e){var f=g(b);(c=!!c)&&a.q.O4(f)&&a.q.Kt(b,!1);f.toggleClass(a.q.ALa[e],!c)};a.q.P5a=function(b){var c=b.query;if(null!==c){var e=b[a.q.$y],c=window.matchMedia(c),
f=a.q.kra(b);b=function(b){a.q.lsa(e,b.matches,f)};c.addListener(b);a.q.lsa(e,c.matches,f);g.data(g(e)[0],a.q.mZ,{mqList:c,mqListener:b})}};o_("OffcanvasUtils.setupResponsive",a.q.P5a,a);a.q.h6a=function(b){b=a.q.cj(b);var c=g.data(b[0],a.q.mZ);c&&(c.mqList.removeListener(c.mqListener),g.removeData(b[0],a.q.mZ))};o_("OffcanvasUtils.tearDownResponsive",a.q.h6a,a);a.q.oUa=function(b,c,e){function f(e){e.removeClass(a.q.Qi);l?l=!1:(a.q.rn(b),h.trigger("ojopen",b),a.q.FT(b),c(!0))}var h=a.q.cj(b),k=g(b[a.q.UG]);
a.C.yf(k,g);var l=!0,m=b.size,p;h.addClass(a.q.yO);window.setTimeout(function(){e===a.q.Ly||e===a.q.Ky?(void 0===m&&(m=h.outerWidth(!0)+"px"),p=a.q.B3(e,m,!1)):(void 0===m&&(m=h.outerHeight(!0)+"px"),a.q.Xp(h,a.q.gma(m,e===a.q.ZG)),p=a.q.gma(m,e!==a.q.ZG));window.setTimeout(function(){a.q.mXa(h,k,p);a.q.aB(h,!1);a.q.mn(k,f);a.q.mn(h,f)},0)},0);a.q.$_(b,h)};a.q.kUa=function(b,c,e){var f=a.q.cj(b);a.q.kF(b,f,!0);var g=b.size;g&&(e===a.q.Ly||e===a.q.Ky?a.q.Xp(f,a.q.B3(e,g,!0)):a.q.Xp(f,a.q.fma(e,g)));
window.setTimeout(function(){a.q.aB(f,!1)},20);a.q.$_(b,f);a.q.mn(f,function(){f.removeClass(a.q.Qi);a.q.rn(b);f.trigger("ojopen",b);a.q.FT(b);c(!0)})};a.q.ZIa=function(b,c,e,f){function h(){l||(k.removeClass(a.q.Qi),a.q.Xp(k,""),a.q.Ft(b),c(!0));l=!1}var k=g(b[a.q.UG]),l=!0;a.q.Xp(e,"");a.q.Xp(k,"");a.q.aB(e,!1);a.q.oK(b)&&b[a.q.vC].removeClass(a.q.fO);f?(k.addClass(a.q.Qi),e.addClass(a.q.Qi),a.q.mn(e,h),a.q.mn(k,h)):(l=!1,h())};a.q.YIa=function(b,c,e,f){function g(){a.q.Ft(b);c(!0)}a.q.aB(e,!1);
a.q.oK(b)&&b[a.q.vC].removeClass(a.q.fO);f?(e.addClass(a.q.Qi),a.q.mn(e,g)):g()};a.q.jUa=function(b,c,e,f){var h=a.q.cj(b),k=a.q.mR(b);a.C.yf(k,g);a.q.kF(b,k,!0);var l;e===a.q.Ly||e===a.q.Ky?(l=void 0===l?h.outerWidth(!0)+"px":l,f===a.q.Hy&&a.q.BL(k,e,l)):(l=void 0===l?h.outerHeight(!0)+"px":l,f===a.q.Hy&&a.q.jYa(k,e,l));window.setTimeout(function(){a.q.aB(h,!1)},10);a.q.$_(b,h);a.q.mn(k,function(){k.removeClass(a.q.Qi);a.q.rn(b);h.trigger("ojopen",b);a.q.FT(b);c(!0)})};a.q.XIa=function(b,c,e,f){function g(){a.q.Ft(b);
c(!0)}var k=b[a.q.Gy],l=a.q.mR(b);k===a.q.Hy&&a.q.Xp(l,"");a.q.aB(e,!1);a.q.oK(b)&&b[a.q.vC].removeClass(a.q.fO);f?(l.addClass(a.q.Qi),a.q.mn(l,g)):g()};a.q.open=function(b){var c=a.q.cj(b),e=g.data(c[0],a.q.ot);if(e){if(e[a.q.TG])return e[a.q.TG];if(e[a.q.HY])return e[a.q.HY]}var f,h=!1,e=new Promise(function(e,k){a.C.yf(c,g);var p=a.q.kra(b),t=g.Event("ojbeforeopen");c.trigger(t,b);if(!1===t.result)k(a.q.tCa),h=!0;else{var t=a.q.ZMa(b),s=a.q.S4(b);!s||p!==a.q.ZG&&p!==a.q.$N||(t=a.q.Hy);var n=g.extend({},
b);n[a.q.Gy]=t;g.data(c[0],a.q.ot,n);if(b[a.q.UG]){if(!a.q.gpa(b))throw"Error: Both main content selector and the inner wrapper \x3cdiv class\x3d'oj-offcanvas-inner-wrapper'\x3e are provided. Please remove the inner wrapper.";f=a.Context.getContext(c[0]).Rc().Vc({description:"The offcanvas selector \x3d'"+b[a.q.$y]+"' doing the open animation."});s||(t===a.q.Hy?a.q.oUa(n,e,p):a.q.kUa(n,e,p))}else a.q.jUa(n,e,p,t)}}),e=e.then(function(a){f&&f();return a},function(a){f&&f();throw a;});if(!h){var k=
g.data(c[0],a.q.ot);k&&(k[a.q.HY]=e,a.Components.Yo(c[0]))}return e};o_("OffcanvasUtils.open",a.q.open,a);a.q.close=function(b){return a.q.Kt(b[a.q.$y],!0)};o_("OffcanvasUtils.close",a.q.close,a);a.q.Kt=function(b,c){var e=g(b);a.C.yf(e,g);var f=g.data(e[0],a.q.ot);if(f&&f[a.q.TG])return f[a.q.TG];var h,k=!1,l=new Promise(function(l,p){if(a.q.O4(e)){b!=f[a.q.$y]&&l(!0);a.q.aB(e,!0)||l(!0);var t=g.Event("ojbeforeclose");e.trigger(t,f);!1===t.result?(p(a.q.sCa),k=!0):(c&&(h=a.Context.getContext(e[0]).Rc().Vc({description:"The offcanvas selector \x3d'"+
f[a.q.$y]+"' doing the close animation."})),t=f[a.q.Gy],f[a.q.UG]?t===a.q.Hy?a.q.ZIa(f,l,e,c):a.q.YIa(f,l,e,c):a.q.XIa(f,l,e,c))}else l(!0)}),l=l.then(function(a){h&&h();return a},function(a){h&&h();throw a;});!k&&(f=g.data(e[0],a.q.ot))&&(f[a.q.TG]=l,a.Components.Jq(e[0]));return l};a.q.toggle=function(b){var c=a.q.cj(b);a.C.yf(c,g);return a.q.O4(c)?a.q.close(b):a.q.open(b)};o_("OffcanvasUtils.toggle",a.q.toggle,a);a.q.OGa=function(b){var c=g("\x3cdiv\x3e");c.addClass(a.q.SAa);c.attr("role","presentation");
c.attr("aria-hidden","true");c.appendTo(b.parent());c.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(a){a.stopPropagation();a.preventDefault()});return c};a.q.m1=function(b){var c=g("\x3cspan style\x3d'display:none'\x3e");c.attr("aria-hidden","true");var e=b.attr("id");e?(e=[e,"surrogate"].join("_"),c.attr("id",e)):e=c.uniqueId();c.insertBefore(b);b.attr(a.q.QY,e);return c};a.q.UYa=function(b,c){b[a.q.Eca]=a.q.m1(c);c.appendTo(c.parent())};a.q.UWa=function(b){var c=
a.q.cj(b);b=b[a.q.Eca];c&&b&&c.attr(a.q.QY)===b.attr("id")&&(c.insertAfter(b),c.removeAttr(a.q.QY),b.remove())};a.q.$_=function(b,c){a.q.oK(b)&&(b[a.q.vC]=a.q.OGa(c),a.q.UYa(b,c),window.setTimeout(function(){b[a.q.vC].addClass(a.q.fO)},0))};a.q.cWa=function(b){a.q.oK(b)&&(b[a.q.vC].remove(),a.q.UWa(b))};a.q.Lza=function(b){var d,e,f,h,k,l,m,p,t,s,n,q;null==g(b).attr("oj-data-pansetup")&&(g(b).attr("oj-data-pansetup","true"),b.displayMode="push",d=a.q.cj(b),f=a.q.dA(d),k={recognizers:[[c.Pan,{direction:c.DIRECTION_HORIZONTAL}]]},
l=!1,g(f).Tg(k).on("panstart",function(f){m=null;switch(f.gesture.direction){case c.DIRECTION_LEFT:Math.abs(f.gesture.deltaY)<Math.abs(f.gesture.deltaX)&&(m=a.q.Kh()?"end":"start");break;case c.DIRECTION_RIGHT:Math.abs(f.gesture.deltaY)<Math.abs(f.gesture.deltaX)&&(m=a.q.Kh()?"start":"end")}null!=m&&(p={direction:m,distance:Math.abs(f.gesture.deltaX)},t=g.Event("ojpanstart"),d.trigger(t,p),t.isDefaultPrevented()||(e=b.size,null==e&&(e=d.outerWidth()),b._closePromise=null,b._panInProgress=!0,h=a.q.mR(b),
h.off(".oc"),a.q.kF(b,h,!0),l=!0,f.gesture.srcEvent.stopPropagation(),f.stopPropagation()))}).on("panmove",function(b){l&&(s=b.gesture.deltaX,"start"==m&&0<s||"end"==m&&0>s?a.q.BL(h,"start","0px"):(d.css("width",Math.abs(s)),h.removeClass(a.q.Qi),a.q.BL(h,"start",s+"px"),p={direction:m,distance:Math.abs(s)},t=g.Event("ojpanmove"),d.trigger(t,p),b.gesture.srcEvent.stopPropagation(),b.stopPropagation()))}).on("panend",function(c){l&&(l=!1,b._panInProgress=null,s=Math.abs(c.gesture.deltaX),p={distance:s},
t=g.Event("ojpanend"),d.trigger(t,p),c.stopPropagation(),t.isDefaultPrevented()?(q=function(){a.q.kF(b,h,!1);h.removeClass(a.q.Qi);h.off("transitionend webkitTransitionEnd otransitionend oTransitionEnd",q);d.trigger("ojclose",b)},h.on("transitionend webkitTransitionEnd otransitionend oTransitionEnd",q),h.addClass(a.q.Qi),a.q.BL(h,"start","0px")):(n=b.edge,null==n&&(n=d.hasClass("oj-offcanvas-start")?"start":"end"),a.q.yHa(h,d,n,e,b),g.data(d[0],a.q.ot,b),g.data(d[0],a.q.lZ,n),a.q.FT(b)))}))};o_("OffcanvasUtils.setupPanToReveal",
a.q.Lza,a);a.q.yHa=function(b,c,e,f,g){var k,l,m,p,t,s,n,q,r,u;b.removeClass(a.q.Qi);k=Math.round(1E3/60);l=b.css("transform").split("(")[1].split(")")[0].split(",");m=parseInt(l[4],10);p="end"==e?0-f:f;s=Math.max(1,Math.abs(p-m)/(400/k));n=(new Date).getTime();q=function(){r=(new Date).getTime();u=Math.max(s,s*Math.max((r-n)/k));n=r;m<p?m=Math.min(p,m+u):m>p&&(m=Math.max(p,m-u));a.q.BL(b,e,Math.abs(m)+"px");c.css("width",Math.abs(m)+"px");m==p?(window.cancelAnimationFrame(t),b.addClass(a.q.Qi),c.trigger("ojopen",
g)):t=window.requestAnimationFrame(q)};t=window.requestAnimationFrame(q)};a.q.bAa=function(b){b=a.q.cj(b);b=a.q.dA(b);g(b).off("panstart panmove panend")};o_("OffcanvasUtils.tearDownPanToReveal",a.q.bAa,a)});