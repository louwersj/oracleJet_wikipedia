/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,g){(function(){a.hb("oj.ojProgressbar",g.oj.baseComponent,{version:"1.0.0",defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{max:100,value:0,type:"bar",disabled:!1},min:0,nA:!1,qc:function(){this._super();this.oldValue=this.options.value=this.Qha();this.element.attr({role:"progress","aria-valuemin":this.min});"circle"===this.options.type?(this.element.addClass("oj-progress-circle oj-component"),this.msa()):(this.element.addClass("oj-progress-bar"),
this.aba=g("\x3cdiv class\x3d'oj-progress-bar-value'\x3e\x3c/div\x3e").appendTo(this.element));this.kqa()},Ah:function(a,b){var d=this.element;this._super(a,b);void 0===b.max&&(d=d.attr("max")||void 0,null!=d&&(this.options.max=d))},Qha:function(a){void 0===a&&(a=this.options.value);this.nA=-1==a;"number"!==typeof a&&(a=isNaN(a)?0:Number(a));return this.nA?-1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a,b){var d=a.value;delete a.value;this._super(a,b);this.options.disabled||
(this.options.value=this.Qha(d),this.kqa())},msa:function(){this.CX&&g(this.CX).remove();if(!this.nA){var a=document.createElementNS("http://www.w3.org/2000/svg","svg"),b=document.createElementNS("http://www.w3.org/2000/svg","circle"),d=document.createElementNS("http://www.w3.org/2000/svg","circle"),e=.5*Math.min(this.element.outerWidth(),this.element.outerHeight());a.setAttribute("width",2*e);a.setAttribute("height",2*e);a.setAttribute("class","oj-progress-circle-transform");b.setAttribute("r",.9*
e);b.setAttribute("cx",e);b.setAttribute("cy",e);b.setAttribute("class","oj-progress-circle-base");d.setAttribute("r",.9*e);d.setAttribute("cx",e);d.setAttribute("cy",e);d.setAttribute("class","oj-progress-circle-base oj-progress-circle-value");var e=1.8*e*Math.PI,f=e-this.Epa()/100*e;d.setAttribute("style","stroke-dasharray:"+e.toString()+";stroke-dashoffset:"+f);a.appendChild(b);a.appendChild(d);this.CX=a;this.element[0].appendChild(a)}},_setOption:function(a,b,d){"max"===a&&(b=Math.max(this.min,
b));this._super(a,b,d)},Epa:function(){return Math.min(this.nA?100:100*(this.options.value-this.min)/(this.options.max-this.min),100)},kqa:function(){var a=this.options.value,b=this.Epa(),d="circle"===this.options.type;d?this.msa():d||(this.aba.toggle(this.nA||a>this.min).width(b.toFixed(0)+"%"),this.element.toggleClass("oj-progress-bar-indeterminate",this.nA));this.nA?(this.element.attr({"aria-valuetext":this.R("ariaIndeterminateProgressText")}),this.element.removeAttr("aria-valuenow"),this.element.removeAttr("aria-valuemin"),
this.element.removeAttr("aria-valuemax"),this.Ps||(d?(this.Ps=g("\x3cdiv class\x3d'oj-progress-circle-overlay'\x3e\x3c/div\x3e").appendTo(this.element),a=Math.min(this.element.outerWidth(),this.element.outerHeight()),this.Ps.css("width",a),this.Ps.css("height",a)):this.Ps=g("\x3cdiv class\x3d'oj-progress-bar-overlay'\x3e\x3c/div\x3e").appendTo(this.aba),this.Ps.addClass("oj-indeterminate"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":a}),this.Ps&&(this.Ps.remove(),this.Ps=
null))},_destroy:function(){"circle"===this.options.type?(this.element.removeClass("oj-progress-circle oj-component"),this.CX&&this.CX.remove()):(this.element.removeClass("oj-progress-bar").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.aba.remove(),this._super());this.Ps&&this.Ps.remove()}})})();a.J.Ua("oj-progress","baseComponent",{properties:{max:{type:"number"},type:{type:"string",enumValues:["bar","circle"]},radius:{type:"number"},
value:{type:"number",writeback:!0}},methods:{},extension:{Xa:"ojProgressbar"}});a.J.register("oj-progress",{metadata:a.J.getMetadata("oj-progress")})});