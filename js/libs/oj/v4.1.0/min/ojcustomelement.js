/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","require","promise","customElements"],function(a,g){a.aa={};a.aa.Zf={vM:function(c){function b(){var a=window.Reflect;return"undefined"!==typeof a?a.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)}var d=Object.create(HTMLElement.prototype);this.Wba(d);var e=this.cH(c);a.aa.$Q(d,e,"properties",this.ZN.bind(this));a.aa.$Q(d,e,"methods",this.aY.bind(this));this.SN(d);d.setProperties=function(b){a.aa.Ya(this).ZXa(this,b)};d.attributeChangedCallback=this.d0;d.connectedCallback=
this.rJa;d.disconnectedCallback=this.RKa;var f=this;Object.defineProperty(b,"observedAttributes",{get:function(){return f.Fba(e)}});Object.defineProperty(d,"constructor",{value:b,writable:!0,configurable:!0});b.prototype=d;Object.setPrototypeOf(b,HTMLElement);return b},T1a:function(){return this.jO().mq()},g9a:function(){this.mY().R4a()},rj:function(){this.mY().FG()},SN:function(){},XN:function(){},aY:function(){},ZN:function(){},jO:function(){this.Gia||(this.Gia=new a.aa.TP);return this.Gia},mY:function(){this.Hia||
(this.Hia=new a.aa.TP);return this.Hia},Fba:function(c){return a.aa.ova(c.properties)},cH:function(){return{}},Zs:function(a){return a},Rba:function(){},I6a:function(){},Sba:function(){},eH:function(){this.Aga=!1;this.Nha||this.xf()},wY:function(){},Uy:function(c){this.Iv=this.cH(a.aa.VP(c.tagName))},Wba:function(){},jba:function(a,b){for(var d=Object.keys(b),e=0;e<d.length;e++){var f=d[e];a.setProperty(f,b[f])}},VN:function(){return!1},TO:function(c,b,d,e,f){e=this.NC(f,d,e);a.aa.Ifa(c,b,d,e)},NC:function(c,
b,d){if(null!=d){var e=a.aa.hl(this),f=a.aa.Zm(b,e),h=b.split("."),k=this.VN(h);if(!f&&!k){a.D.warn("Ignoring property set for undefined property "+b+" on "+c.tagName);return}if(e[h[0]].readOnly)throw this.rj(),"Read-only property "+b+" cannot be set on "+this.tagName;a.aa.cGa(c,b,d,f);if(!k)return a.aa.dGa(c,b,d,f)}return d},d0:function(c,b,d){var e=a.aa.Ya(this);if(e.Bga){var f=a.$b.xF(c),h=a.aa.Zm(f,a.aa.hl(e));a.aa.Efa(this,c);null===d&&(d=void 0);this.dispatchEvent(new CustomEvent("attribute-changed",
{detail:{attribute:c,value:d,previousValue:b}}));h&&!a.$b.sB(d).expr&&this.setProperty(f,a.aa.Ffa(this,c,f,d,h,e.CO));e.Rba(this,c,b,d)}},qJa:function(c){this.Aga=!0;if(this.Bga)this.Nha||this.nqa(c),this.wY();else{this.Bga=!0;this.nqa(c);this.HTa(c);this.Uy(c);var b=this;a.aa.DMa(c).then(function(a){a.whenReady(c).then(function(){b.XN(c)});a.addDisposeCallback(c,b.Sba.bind(b))})}},rJa:function(){a.aa.Ya(this).qJa(this)},RKa:function(){a.aa.Ya(this).eH(this)},HTa:function(a){function b(){d.Aga&&d.xf();
d.Nha=!0}var d=this;this.mY().mq().then(function(){a.classList.add("oj-complete");b()},b)},nqa:function(c){this.qna=a.Context.getContext(c).Rc().Vc({description:c.tagName+" identified by '"+c.id+"' is being upgraded."})},xf:function(){var a=this.qna;if(!a)throw this.rj(),"Unexpected call to _resolveBusyState()";this.qna=null;a()},ZXa:function(a,b){for(var d=[],e={},f=!1,h=Object.keys(b),k=0;k<h.length;k++){var g=h[k];0<=g.indexOf(".")?d.push(g):(e[g]=b[g],f=!0)}f&&this.jba(a,e);for(e=0;e<d.length;e++)f=
d[e],a.setProperty(f,b[f])}};a.aa.ova=function(c){var b=[];a.aa.$ja("",c,b);return b};a.aa.$ja=function(c,b,d){if(b)for(var e in b){var f=b[e];if(!f.readOnly){var h=c+e;d.push(a.$b.iaa(h));var k=f.type;k&&"object"===k.toLowerCase()&&a.aa.$ja(h+".",f.properties,d)}}};a.aa.Ya=function(c){var b=c[a.aa.eea];if(!b){b=a.aa.ME[c.tagName.toLowerCase()];if(!b)throw"Attempt to interact with the custom element before it has been registered";b=Object.create(b.H_a);Object.defineProperty(c,a.aa.eea,{value:b})}return b};
a.aa.hl=function(a){return a.Iv&&a.Iv.properties};a.aa.yB=function(c){return c&&(c=a.aa.ME[c.toLowerCase()])?{lM:c.lM}:null};a.aa.i$=function(a){return 1===a.nodeType||3===a.nodeType};a.aa.JEa="none";a.aa.$Q=function(a,b,d,e){if(b&&b[d]){var f=b[d];Object.keys(f).forEach(function(b){e(a,b,f[b])})}};a.aa.DMa=function(c){var b=a.aa.cka(c);if(b===a.aa.JEa)c=Promise.resolve({whenReady:function(){return Promise.resolve(!1)},addDisposeCallback:function(){}});else if("knockout"==b)c=a.aa.vNa();else throw a.aa.Ya(c).rj(),
"Unknown binding provider: "+b;return c};a.aa.cka=function(c){var b=c._ojBndgPrv;if(b)return b;b=c.getAttribute("data-oj-binding-provider")||a.aa.QMa(c);if(!b)if(b=c.parentElement,null==b)if(c===document.documentElement)b="knockout";else throw a.aa.Ya(c).rj(),"Cannot determine binding provider for a disconnected subtree";else b=a.aa.cka(b);Object.defineProperty(c,"_ojBndgPrv",{value:b});return b};a.aa.QMa=function(c){return a.lf?a.lf.q1a(c.parentElement):null};a.aa.vNa=function(){a.aa.Uga||(a.aa.Uga=
a.aw()?new Promise(function(a,b){g(["ojs/ojknockout"],a,b)}):Promise.resolve(a.lz.Ya()));return a.aa.Uga};a.aa.cGa=function(c,b,d,e){if("string"==typeof d&&e&&(e=e.enumValues)&&-1===e.indexOf(d))throw a.aa.Ya(c).rj(),"Invalid value found for property '"+b+"' on "+c.tagName+" with id "+c.id+"'. Found: '"+d+"'. Expected one of the following: "+e.toString();};a.aa.dGa=function(c,b,d,e){if(e=e.type){e=e.toLowerCase();var f=e.split("|"),h=typeof d;if(1===f.length)("array"===e.substring(0,5)&&!Array.isArray(d)||
"object"===e.substring(0,6)&&"object"!==h||"number"===e&&("number"!==typeof d||!isFinite(d))||"string"===e&&"string"!==h)&&a.aa.kD(c,b,d,e),"boolean"===e&&(d=!!d);else if(2===f.length){var k=f.indexOf("string"),g=f.indexOf("promise");-1!==k&&"string"!==typeof f[k]?(f=0===k?f[1]:f[0],("function"===f&&"function"!==h||"array"===f.substring(0,5)&&!Array.isArray(d)||"object"===f.substring(0,6)&&"object"!==h)&&a.aa.kD(c,b,d,e)):-1===g||d instanceof Promise||(f=0===g?f[1]:f[0],"array"!==f.substring(0,5)||
Array.isArray(d)||a.aa.kD(c,b,d,e))}}return d};a.aa.kD=function(c,b,d,e){a.aa.Ya(c).rj();throw"Invalid type found for "+c.tagName+" property '"+b+"'. Found: "+d+" of type "+typeof d+", but expected type "+e+".";};a.aa.VP=function(c){return c?a.aa.ME[c.toLowerCase()].N0a:null};a.aa.fGa=function(c){return c?a.aa.ME[c.toLowerCase()].yi:null};a.aa.Efa=function(c,b){var d=b.split(".");if(1<d.length)for(d.pop();d.length;){var e=d.join(".");if(c.hasAttribute(e))throw a.aa.Ya(c).rj(),"Cannot set overlapping attributes "+
b+" and "+e;d.pop()}};a.aa.Zm=function(a,b){for(var d=b,e=a.split("."),f=0;f<e.length;f++)if(d=d[e[f]],1<e.length&&f<e.length-1&&(d=d.properties,!d))return null;return d};a.aa.J_=function(c,b,d){var e=a.aa.Ya(c),f=a.aa.hl(e);if(f)for(var h=c.attributes,k=0;k<h.length;k++){var g=h[k],m=a.$b.xF(g.nodeName),p=a.aa.Zm(m,f);p&&!p.readOnly&&(a.aa.Efa(c,g.nodeName),a.$b.sB(g.value).expr||(g=a.aa.Ffa(c,g.nodeName,m,g.value,p,d),e.TO(e.Zs.bind(e),b,m,g,c)))}};a.aa.Ifa=function(a,b,d,e){d=d.split(".");for(var f=
0;f<d.length;f++){var h=a(d[f]);if(f===d.length-1){b[h]=e;break}else b[h]||(b[h]={});b=b[h]}};a.aa.I_=function(a,b){for(var d=a,e=b.split("."),f=0;f<e.length;f++){var h=e[f];if(f===e.length-1)return d[h];if(!d[h])return null;d=d[h]}};a.aa.Ffa=function(c,b,d,e,f,h){function k(d){var e;try{e=a.$b.G8(c,b,d,g)}catch(f){throw m.rj(),f;}return e}if(null==e)return e;var g=f.type,m=a.aa.Ya(c);return h?h(e,d,f,function(a){return k(a)}):k(e)};a.aa.Gfa=function(c,b){c=a.oc.Ed({},c,void 0,!0,1);c.properties=
c.properties||{};a.aa.$Q(null,c,"properties",function(b,e){c.properties[a.$b.Yua(a.$b.Uya(e))]={JQ:!0,lJ:!0}});a.aa.$Q(null,c,"events",function(d,e){c.properties[a.$b.Yua(b?a.$b.Xua(e):e)]={JQ:!0,lJ:!0}});return c};a.aa.Hfa=function(c,b,d,e){var f=c.toLowerCase();if(!a.aa.ME[f]){if(!b)throw"Error registering "+c+": missing a descriptor.";a.aa.ME[f]={N0a:b,H_a:d,lM:e,yi:{}};return!0}return!1};a.aa.ME={};a.aa.eea="_ojBridge";a.aa.TP=function(){var a,b,d;this.mq=function(){a||(a=new Promise(function(a,
c){b=a;d=c}));return a};this.R4a=function(){d&&d(void 0)};this.FG=function(d){b?b(d):a=Promise.resolve(d)}}});