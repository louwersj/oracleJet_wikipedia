/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,g){(function(){a.hb("oj.ojToolbar",g.oj.baseComponent,{widgetEventPrefix:"oj",options:{chroming:"half"},Ah:function(c,b){this._super(c,b);"disabled"in b&&a.D.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.")},qc:function(){this._super();this.element.attr(a.Components.dr,this.widgetName).addClass("oj-toolbar oj-component").attr("role","toolbar");this.qb()},
Xi:function(a,b,d){a=this.element.find(":oj-button[tabindex\x3d0]");this.$i(b,d,{launcher:a,position:{of:"keyboard"===d?a.ojButton("widget"):b}})},_setOption:function(c,b){"disabled"===c?a.D.warn("Caller attempted to set the 'disabled' option on Toolbar, but Toolbar does not support the 'disabled' option.  See API doc.  Ignoring the call."):(this._superApply(arguments),"chroming"===c&&this.c6())},refresh:function(){this._super();this.qb()},qb:function(){var a=this;this.Fn="rtl"===this.Uc();this.ul=
void 0;this.Y()?(this.Vja=function(){a.YPa()},this.element[0].addEventListener("focusin",this.Vja,!0),this.KX=this.element.find("oj-button").add(this.element.find("oj-menu-button")).add(this.element.find("oj-buttonset-one")).add(this.element.find("oj-buttonset-many")),this.c6()):(this.Qe=this.element.find(":oj-button").unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(b){a.Hr(b,g(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(){g(this).ojButton("option",
"disabled")||a.nx(g(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(){a.jS(g(this))}),this.eba=this.element.find(":oj-buttonset").ojButtonset("refresh"),this.sAa=this.Qe.not(this.eba.find(":oj-button")).ojButton("refresh"))},jS:function(a){this.Y()||null!=this.ul?this.nx(a):(this.ul=this.Qe.filter(function(){return!g(this).ojButton("option","disabled")}),this.GS(null==this.ku),this.ul[0].focus())},YPa:function(){var a=this;this.element[0].removeEventListener("focusin",
this.Vja,!0);var b=this.element.find("oj-button").add(this.element.find("oj-menu-button")),d=this.element.find("oj-buttonset-one").add(this.element.find("oj-buttonset-many"));this.KX=b.add(d);this.Qe=b.add(d.find(".oj-button")).unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(b){var d=g(this);a.Hr(b,d)}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(){var b=g(this);b.hasClass("oj-disabled")||a.nx(b)}).unbind("focusin"+this.eventNamespace).bind("focusin"+
this.eventNamespace,function(){var b=g(this);a.jS(b)});this.ul=this.Qe.filter(function(){return!g(this).hasClass("oj-disabled")});this.GS(null==this.ku);this.vJ(this.ul[0]).focus()},vJ:function(a){return this.Y()?(a=g(a),a.hasClass("oj-button-toggle")?a.children("input")[0]:a.children("button")[0]):a},GS:function(a){var b=g(this.ku);this.ku=void 0;if(this.Y())for(var d=0;d<this.Qe.length;d++)this.vJ(this.Qe[d]).setAttribute("tabindex","-1");else this.Qe.attr("tabindex","-1");a=a||!b.is(this.ul)?this.ul.first():
b;this.nx(a)},iT:function(a){var b=this.ul;return a.map(function(a,c){if("radio"!=c.type||c.checked||""==c.name)return c;var f=c.name;f?(f=f.replace(/'/g,"\\'"),f=b.filter(":radio[name\x3d'"+f+"']:oj-button")):f=b.filter(c).filter(":oj-button");f=f.filter(":checked");return f.length?f[0]:c})},nx:function(a){a=this.Y()?this.iT(g(this.vJ(a[0]))):this.iT(a);var b=a[0],d=this.ku;b!==d&&(g(d).attr("tabindex","-1"),a.attr("tabindex","0"),this.ku=b)},Hr:function(a,b){switch(a.which){case g.ui.keyCode.UP:case g.ui.keyCode.DOWN:if("radio"!=
b.attr("type"))break;case g.ui.keyCode.LEFT:case g.ui.keyCode.RIGHT:a.preventDefault();var d=this.ul,e=d.length;if(2>e)break;var f=d.index(b);this.vJ(d.eq((f+(a.which==g.ui.keyCode.DOWN||a.which==g.ui.keyCode.RIGHT^this.Fn?1:-1)+e)%e)[0]).focus()}},_destroy:function(){this.element.removeClass("oj-toolbar oj-component").removeAttr(a.Components.dr).removeAttr("role");this.Qe.attr("tabindex","0");this.c6()},c6:function(){if(this.Y())for(var c=0;c<this.KX.length;c++){var b=this.KX[c];"OJ-BUTTON"==b.tagName||
"OJ-MENU-BUTTON"==b.tagName?a.Components.wd(this.vJ(b),"ojButton")&&b.refresh():"OJ-BUTTONSET-ONE"!=b.tagName&&"OJ-BUTTONSET-MANY"!=b.tagName||!a.Components.wd(b,"ojButtonset")||b.refresh()}else this.eba.ojButtonset("refresh"),this.sAa.ojButton("refresh")}})})();a.Components.Gq({ojToolbar:{chroming:a.Components.Af(function(){return(a.gc.Yc("oj-toolbar-option-defaults")||{}).chroming})}});a.J.Ua("oj-toolbar","baseComponent",{properties:{chroming:{type:"string",enumValues:["half","full","outlined"]}},
extension:{Xa:"ojToolbar"}});a.J.register("oj-toolbar",{metadata:a.J.getMetadata("oj-toolbar")})});