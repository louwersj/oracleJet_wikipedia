/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojdnd","ojs/ojanimation"],function(a,g){function c(a,d,e,f,g,k){null==c.R_&&(c.R_=c.uMa());this.Pf=a;this.fj=d;this.OHa=e;f&&f.eAa&&(this.cZa=f.eAa);g&&g.fAa&&(this.H7=g.fAa);k&&(k.gM&&(this.kr=k.gM),k.GN&&(this.Rr=k.GN),k.pwa&&(this.Ola=k.pwa),k.xwa&&(this.Zla=k.xwa),k.Pza&&(this.px=k.Pza),k.$wa&&(this.mE=k.$wa),k.Vza&&(this.VA=k.Vza),k.Bxa&&(this.vE=k.Bxa),k.Axa&&(this.Or=k.Axa),k.zxa&&(this.Zw=k.zxa),k.Sza&&(this.DL=k.Sza),k.rd&&(this.bF=k.rd),
k.Ug&&(this.cF=k.Ug),k.Vc&&(this.wp=k.Vc));d=document.createElement("div");e=d.style;e.display="inline-block";e.overflow="hidden";e.visibility="hidden";f=document.createElement("div");e=f.style;e.display="inline-block";d.appendChild(f);a.insertBefore(d,a.firstChild);this.Bsa=d;this.l7=f;var l=this;this.fna=function(){l.jRa()};this.v6=function(){l.xf()}}(function(){function b(a){for(;a;){a=a.nextSibling;var b=!0;if(a){var c=a.style;!c||c.visibility!==t&&c.display!==s||(b=!1)}if(a&&1===a.nodeType&&
b)return a}return null}function d(a,b){for(var c=a;c;){var d=c.style;if(d&&(d.visibility===t||d.display===s))break;d=c.parentNode;if(d===b)return c;c=d}return null}function e(a,b){return b.De<a.De?1:a.De<b.De?-1:0}function f(a){a&&a.sort(e);return a}function h(a){var b=null;if(a=g(a).attr("class").match(w))b=a[0].substring(u.length+1),a=b.indexOf("x"),b={colSpan:c.Ih(b.substring(0,a)),rowSpan:c.Ih(b.substring(a+1))};return b}function k(a){var b=null;(a=g(a).attr("class").match(w))&&(b=a[0]);return b}
function l(a,b){g(a).removeClass(b)}function m(a,b){g(a).addClass(b)}a.hb("oj.ojMasonryLayout",g.oj.baseComponent,{defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{reorderHandle:null,animateStart:null,animateEnd:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},qc:function(){this._super();this.element.addClass("oj-masonrylayout oj-component");this.options.disabled&&a.D.warn(y);this.aC=this.eventNamespace+"ReorderHandle";
this.eb={};this.eb.sj=!1;this.eb.If=!1;this.eb.fba=!1;this.eb.xm=!1;this.eb.Nn=!1;this.Nw();this.vI();this.qb(!0)},refresh:function(){this._super();var a="rtl"===this.Uc()!==this.Jj;a&&this.Qia();this.qb(a)},cr:function(){this._super();this.Sf?this.qb(this.Sf[0]):this.ri.Hq(!0)},$n:function(){this._super();this.Sf?this.qb(this.Sf[0]):this.ri.Hq(!0)},Xi:function(a,b,c){this.EUa(b);(a=this.eb.If.children().not(".oj-helper-hidden"))&&0<a.length&&this.$i(b,c,{launcher:g(b.target).closest(":tabbable")})},
qb:function(b){if(this.FI()){this.Sf=null;this.Jj="rtl"===this.Uc();this.ew=a.T.ke();var d=this.element,e=this.options;if(b){var g=this;this.px=function(a){g.FYa(a)};this.mE=function(a){g.iRa(a)};this.VA=function(a,b){return g.ZE(a,b)};this.vE=function(){g.dTa()};this.Or=function(){g.cTa()};this.Zw=function(a){g.bTa(a)};if(!this.ri){var q={};q.eAa=v;var n={};n.fAa=x;var r={};r.gM=m;r.GN=l;r.pwa=k;r.xwa=h;r.Pza=this.px;r.$wa=this.mE;r.Vza=this.VA;r.Bxa=this.vE;r.Axa=this.Or;r.zxa=this.Zw;r.Sza=f;r.rd=
a.Components.rd;r.Ug=a.Components.Ug;r.Vc=function(a){return g.Bg(a)};this.uga();this.ZWa();this.ri=new c(d[0],this.Jj,"enabled"===a.ra.d9(),q,n,r)}this.Ama=function(a){g.VJ(a)};this.wma=function(a){g.T3(a)};this.yma=function(a){g.V3(a)};this.xma=function(a){g.U3(a)};this.uma=function(a){g.S3(a)};this.Bma=function(a){g.W3(a)};e.reorderHandle&&this.psa()}else this.uga(),e=d.children(),this.u7(e),this.c7(e),this.DIa();this.ri.Hq(b);b&&(this.Rl=function(){g.Jh()},a.T.em(d[0],this.Rl,J))}else d=!1,this.Sf&&
(d=this.Sf[0]),this.Sf=[b||d]},_destroy:function(){this.Mz();var b=this.element;a.T.vm(b[0],this.Rl);this.Rl=null;this.WWa();for(var c=this.Fr(),d=c.length,e=0;e<d;e++)delete c[e].De;this.Qia();b.removeClass("oj-masonrylayout oj-component");this.options.reorderHandle&&this.bta();b.children("."+u).removeClass(u);this.rD=this.Zw=this.Or=this.vE=this.VA=this.mE=this.px=this.Bma=this.uma=this.xma=this.yma=this.wma=this.Ama=null;this._super()},_setOption:function(b,c,d){var e=!1;switch(b){case "reorderHandle":this.bta();
e=!0;break;case "disabled":a.D.warn(y);break;case "contextMenu":a.T.ke()||(this.Mz(),c&&this.Nw(c))}this._super(b,c,d);e&&c&&this.psa()},resizeTile:function(a,b){var c=this.ri;c.qW()&&c.AV();var d=g(a),e=d[0],f=k(e);if(b==f)throw Error("JET MasonryLayout: Unable to resize child "+a+" to style class "+b+" because "+b+" is already applied.");!1!==this._trigger("beforeResize",null,{tile:d,previousSizeStyleClass:f,sizeStyleClass:b})&&(this.wI||(this.wI=[]),this.wI.push(e,f,b),c.resizeTile(a,b))},insertTile:function(b,
c){var d=this.ri;d.qW()&&d.AV();isNaN(c)&&(c=-1);var e=g(b),f=e[0];e.addClass(u);!1!==this._trigger("beforeInsert",null,{tile:e,index:c})&&(f.yoa=c,d.qq()&&e.addClass(x),e=f.style,e.top="-1px",this.Jj?e.right="-1px":e.left="-1px",this.Ow(f,c),d.u3a(f,c),a.Components.rd(f),this.rD||(this.rD=[]),this.rD.push(b))},removeTile:function(b){var c=this.ri;c.qW()&&c.AV();var d=g(b),e=d[0];if(a.uf.iV(e)){var f=this.Fr(!0),e=f.indexOf(e);0<e&&(this.z1=f[e-1])}!1!==this._trigger("beforeRemove",null,{tile:d})&&
c.i3a(b)},Jh:function(){this.mr||this.mna||this.ri.l5a()},FYa:function(a){var b=g(a),c=a.yoa;delete a.yoa;this.options.reorderHandle&&this.c7(b);this.LD.push("insert",{tile:b,index:c})},iRa:function(b){var c=g(b);this.options.reorderHandle&&this.u7(c);c.removeClass(u);a.Components.Ug(b);b.parentNode.removeChild(b);this.MT(b);this.LD.push("remove",{tile:c})},ZE:function(b,c){var d=(a.gc.Yc("oj-masonrylayout-option-defaults")||{}).animation;return a.ea.Fi(b,c,d?d[c]:null,this)},dTa:function(){if(this.rD){for(var a=
this.ri,b=this.rD,c=0;c<b.length;c++)a.T5a(b[c]);this.rD=null}if(this.wI){a=this.wI;for(c=0;c<a.length;c+=3){var b=a[c+1],d=a[c+2],b={tile:g(a[c]),previousSizeStyleClass:b,sizeStyleClass:d};this.LD.push("resize",b)}this.wI=null}this.mr&&(this.hQ?this.vPa():this.f0&&this.vma())},cTa:function(){this.mna=!0;this.dT=null;this.LD=[];var b=document.activeElement;b&&a.T.ys(this.element[0],b)&&(this.dT=b)},bTa:function(b){this.mna=!1;var c=this.element[0];if(this.dT){var d=this.dT;this.dT=null;if(this.z1){if(d=
this.z1,this.z1=null,d&&a.T.ys(c,d)){var c=this.Fr(c,!0),e=c.indexOf(d);0<=e&&e<c.length-1?a.uf.a9(c[e+1]):a.uf.a9(d)}}else a.T.ys(c,d)?a.uf.tM(d):a.uf.a9(c)}b&&b();if(this.LD)for(b=this.LD,this.LD=null,d=0;d<b.length;d+=2)this._trigger(b[d],null,b[d+1])},Qia:function(){var a=this.ri;a&&a.destroy();this.ri=null},FI:function(){var a=document.createElement("div"),b=a.style;b.width="10px";b.height="10px";b=this.element[0];b.appendChild(a);var c=!1;try{c=0<a.offsetWidth&&0<a.offsetHeight}catch(d){}b.removeChild(a);
return c},Fr:function(a){for(var b=this.element.children(v),c=b.length,d=[],e=0;e<c;e++){var f=b[e];if(!a||a&&f!==this.Fg){var g=f.style;g.visibility!==t&&g.display!==s&&d.push(f)}}return d},ZWa:function(){var a=this.Fr();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.De||(c.De=b+1)}},DIa:function(){var a=this.Fr();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.De||this.Ow(c,b)}},WWa:function(){var b=this.Fr(),c=this.Fr();f(c);for(var d=0;d<b.length;d++){var e=b[d],g=c[d];e!=g&&(a.Components.Ug(g),
e.parentNode.insertBefore(g,e),a.Components.rd(g),e=b.indexOf(g),e>d&&(b.splice(e,1),b.splice(d,0,g)))}},Ow:function(a,b){var c=this.Fr();0>b&&(b=c.length);if(c)for(var d=0;d<c.length;d++){var e=c[d];e.De&&e.De>=b+1&&e.De++}a.De=b+1},MT:function(a){if(a.De){var b=this.Fr();if(b)for(var c=0;c<b.length;c++){var d=b[c];d.De&&d.De>a.De&&d.De--}delete a.De}},uga:function(){var a=this.element.children(),a=a.not("."+u),a=a.filter(function(a,b){return b.className.match(w)});a.addClass(u)},Nw:function(a){var b=
null,c=this.Wn();a||c||this.Y()||(c=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+c);if(a||c){c=a||c;b=g.type(c);if("function"==b){try{c=c()}catch(d){c=null}g.type(c)}if(c){if(b=g(c)){b.css("display",s);c=this.eb;if(!c)return;c.If=b;c.sj=!0}this.eb.sj&&a&&this.vI()}}},vI:function(){if(this.eb&&this.eb.sj&&this.options.reorderHandle){var a=this.eb.If,b=this;if("OJ-MENU"===a[0].tagName)a[0].addEventListener("ojAction",this.Qj.bind(this));else a.on("ojselect",this.Qj.bind(this));var c=
!1;a.find("[data-oj-command]").each(function(){if(0===g(this).children("a").length){var d=g(this).attr("data-oj-command").slice(17),d=b.Hl(d,"OJ-MENU"===a[0].tagName?this.tagName:"li");g(this).attr("id",d.attr("id"));"OJ-OPTION"===this.tagName?(this.innerHTML=d.get(0).innerHTML,g(this).attr("data-oj-command",d.attr("data-oj-command"))):(d.get(0).className=g(this).get(0).className,g(this).replaceWith(d));c=!0}});c&&("OJ-MENU"===a[0].tagName?a[0].refresh():a.ojMenu("refresh"));this.eb.fba=a.find("#"+
z);this.eb.xm=a.find("#"+A);this.eb.Nn=a.find("#"+B)}},Mz:function(){var a=this.eb;a&&a.sj&&(a.sj=!1,"OJ-MENU"===a.If[0].tagName?a.If[0].removeEventListener("ojAction"):a.If.off("ojselect"),a.If=null)},EUa:function(a){var c=this.element,e=a.originalEvent.target,f=this.options.reorderHandle;a=!1;f&&(f=g(e).closest(f))&&0<f.length&&(a=!0);c=d(e,c[0]);this.eb.tile=c;if(this.eb.sj){var e=this.eb.mV,f=!1,h=this.eb.fba;if(h){var k=h.hasClass("oj-helper-hidden");a||k?a&&k&&(h.removeClass("oj-helper-hidden"),
f=!0):(h.addClass("oj-helper-hidden"),f=!0);var l=h.hasClass(q),k=!1;e&&c===e&&(k=!0);k&&!l?(h.addClass(q),f=!0):!k&&l&&(h.removeClass(q),f=!0)}if(h=this.eb.xm)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),f=!0),l=h.hasClass(q),k=!1,e&&c!==e&&c!==b(e)||(k=!0),k&&!l?(h.addClass(q),f=!0):!k&&l&&(h.removeClass(q),f=!0);if(h=this.eb.Nn)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),
f=!0),a=h.hasClass(q),k=!1,e&&e!==c&&e!==b(c)||(k=!0),k&&!a?(h.addClass(q),f=!0):!k&&a&&(h.removeClass(q),f=!0);f&&(a=this.eb.If,"OJ-MENU"===a[0].tagName?a[0].refresh():a.ojMenu("refresh"))}},Hl:function(a,b){var c=H[a],d=g(document.createElement(b));d.attr("id",c);d.attr("data-oj-command",a);d.append(this.Ez(a));return d},Ez:function(a){a=C[a];var b=g('\x3ca href\x3d"#"\x3e\x3c/a\x3e');b.text(this.R(a));return b},vTa:function(a){a&&(this.eb.mV=a)},Uoa:function(a,b){if(a&&this.eb.mV){var c=this.eb.mV;
this.eb.mV=!1;this.jLa(c,a,b)}},jLa:function(a,c,d){var e=a.De-1,f=g(a);if(!1!==this._trigger("beforeReorder",null,{tile:f,fromIndex:e})){this.MT(a);var h=c.De-1;d||h++;var k=this.element[0];d||(c=b(c));this.Ow(a,h);k.insertBefore(a,c);this.ri.Hq(!0);this._trigger("reorder",null,{tile:f,fromIndex:e,toIndex:h})}},Qj:function(a,b){var c=(b?b.item:g(a.target)).attr("id");c===z?this.vTa(this.eb.tile):c===A?this.Uoa(this.eb.tile,!0):c===B&&this.Uoa(this.eb.tile,!1)},Yla:function(a){var b=this.Fr(!0);f(b);
for(var c=b.length,d=0;d<c;d++)if(b[d]===a)return d;return-1},psa:function(){var a=this.element,b=a.children();this.c7(b);a.on("dragstart"+this.aC,this.Ama).on("dragenter"+this.aC,this.wma).on("dragover"+this.aC,this.yma).on("dragleave"+this.aC,this.xma).on("dragend"+this.aC,this.uma).on("drop"+this.aC,this.Bma)},c7:function(a){var b=this.options;a.filter(b.reorderHandle).attr(n,"true").addClass(r);a.find(b.reorderHandle).attr(n,"true").addClass(r)},bta:function(){var a=this.element,b=a.children();
this.u7(b);a.off(this.aC)},u7:function(a){var b=this.options;a.filter(b.reorderHandle).removeAttr(n).removeClass(r);a.find(b.reorderHandle).removeAttr(n).removeClass(r)},VJ:function(a){var b=this.options;if(b.reorderHandle){var c=a.originalEvent.target,c=g(c).closest(b.reorderHandle);if(!c||1>c.length)return}b.reorderHandle&&!this.mr&&(c=a.target,b=d(c,this.element[0]))&&(c=this.Yla(b),b.V4=c,c={tile:g(b),fromIndex:c},!1!==this._trigger("beforeReorder",null,c)&&(a=a.originalEvent,this.L1(b,a.pageX,
a.pageY,a.dataTransfer)))},T3:function(b){if(this.mr){b=b.originalEvent;var c=b.relatedTarget,d=this.element[0],e=!1;c?e=d!=c&&!a.T.ys(d,c):this.gja&&(e=(c=document.elementFromPoint(b.clientX,b.clientY))&&(c==d||a.T.ys(d,c)));e&&((this.gja=!1,this.pw)?this.Fg&&(g(this.Fg).css("display",""),this.ri.Hq(!1,!0)):b.dataTransfer.dropEffect="none")}},V3:function(a){if(!this.mr)return!1;var b=a.originalEvent;b.dataTransfer.dropEffect="move";this.rLa(b.pageX,b.clientX,b.clientY);a.preventDefault();return!1},
U3:function(b){if(this.mr){var c=b.originalEvent,d=c.relatedTarget;b=this.element[0];var e=!1;e=d?b!=d&&!a.T.ys(b,d):(c=document.elementFromPoint(c.clientX,c.clientY))&&c!=b&&!a.T.ys(b,c);e&&(this.gja=!0,this.Fg&&(g(this.Fg).css("display",s),this.ri.Hq(!1,!0)))}},zha:function(){if(this.WQ){clearTimeout(this.WQ);this.WQ=null;var a=this.pw;a&&g(a).removeClass("oj-drag")}},S3:function(){this.zha();if(this.mr&&!this.h0){var b=this.pw;if(b&&this.Fg){var c=this.Fg;a.T.ys(this.element[0],b)&&(g(c).css("display",
""),this.MT(c),c.parentNode.removeChild(c),g(b).css("display",""),this.Ow(b,b.De-1),this.ri.Hq(!1,!0));delete b.V4}this.Fg=this.pw=null;this.jQ=this.hQ=!1;this.K1=null;this.mr=this.f0=!1}},W3:function(a){if(!this.mr)return!1;var b=this.ri;b.qW()&&b.AV();this.zha();b=a.originalEvent;this.BLa(this.pw,b.pageX,b.pageY);a.stopPropagation();return!1},L1:function(b,c,d,e){this.mr=!0;this.g0=this.jQ=this.h0=!1;this.pw=b;var f=this.element[0],h=k(b),l=this.Fg=document.createElement("div");l.De=b.De;l.className=
h+" oj-drop "+u;var h=l.style,m=b.style;h.top=m.top;this.Jj?h.right=m.right:h.left=m.left;h=g(b).offset();f.insertBefore(l,b);this.K1=c={left:c-h.left,top:d-h.top};g(b).addClass("oj-drag");e.effectAllowed="move";e.setData("text/html",b.outerHTML);e.setDragImage(b,c.left,c.top);var q=this;this.WQ=setTimeout(function(){q.g0=!0;m.display=s;g(b).removeClass("oj-drag");q.WQ=null;a.Components.Jq(b)},0)},rLa:function(a,c,e){this.jQ=!0;if(this.g0&&!this.hQ){var f=this.element[0];c=document.elementFromPoint(c,
e);c=d(c,f);e=!1;if(c){var h=g(c),k=this.options.reorderHandle;k&&(e=h.is(k)?!0:(e=h.find(k))&&0<e.length)}c&&c!==this.Fg&&c!==this.pw&&e&&(h=g(f).offset(),e=b(this.Fg),a=a-h.left>=c.offsetLeft+.5*c.offsetWidth,this.MT(this.Fg),a&&!this.Jj||!a&&this.Jj?(a=b(c))?(this.Ow(this.Fg,a.De-1),f.insertBefore(this.Fg,a)):(this.Ow(this.Fg,c.De),f.appendChild(this.Fg)):(this.Ow(this.Fg,c.De-1),f.insertBefore(this.Fg,c)),e!==b(this.Fg)&&(this.hQ=this.ri.Hq(!1,!0)))}},vPa:function(){this.hQ=!1},BLa:function(b,
c,d){this.h0=!0;var e=this.element[0],f=this.Fg;this.Fg=null;a.Components.Ug(b);e.insertBefore(b,f);e.removeChild(f);a.Components.rd(b);b.De=f.De;f=b.style;f.display="";a.Components.Yo(b);var h=g(e).offset(),k=this.K1;f.top=d-k.top-h.top+p;c=c-k.left-h.left;this.Jj?(f.right=e.offsetWidth-(c+g(b).outerWidth(!0))+p,f.left=""):f.left=c+p;this.K1=null;this.jQ?this.f0=this.ri.Hq(!1,!0):this.vma()},vma:function(){this.g0=this.jQ=this.h0=this.mr=this.f0=!1;var a=this.pw;this.pw=null;var b=a.V4;delete a.V4;
var c=this.Yla(a),a={tile:g(a),fromIndex:b,toIndex:c};this._trigger("reorder",null,a)},Bg:function(b){var c=this.element,d=a.Context.getContext(c[0]).Rc(),e="MasonryLayout",c=c.attr("id"),e=e+(" (id\x3d'"+c+"')")+(": "+b);return d.Vc({description:e})},getNodeBySubId:function(a){return this._super(a)},getSubIdByNode:function(a){return this._super(a)}});var p="px",t="hidden",s="none",n="draggable",q="oj-disabled",r="oj-draggable",u="oj-masonrylayout-tile",w=/oj-masonrylayout-tile-[0-9]+x[0-9]+/,v="."+
u,x="oj-masonrylayout-tile-transition-show-from",y="JET MasonryLayout: 'disabled' property not supported",z="ojmasonrylayoutcut",A="ojmasonrylayoutpastebefore",B="ojmasonrylayoutpasteafter",H={cut:z,"paste-before":A,"paste-after":B},C={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"},J=25})();c.prototype.Hq=function(a,c){var e=!1;a?(e=this.jg()?!0:!1,this.Kqa()):(this.wp&&(this.Il=this.wp("performing layout (setup)")),this.Or&&this.Or(),this.I7(c),e=this.G7());return e};
c.prototype.destroy=function(){this.xf();for(var a=this.Pf,c=this.jE(),e=0;e<c.length;e++){var f=c[e].style;this.fj?f.right="":f.left="";f.top=""}a.removeChild(this.Bsa);this.wp=this.cF=this.bF=this.DL=this.Zw=this.Or=this.vE=this.VA=this.mE=this.px=this.Zla=this.Ola=this.Rr=this.kr=this.Pf=this.Gt=this.lr=this.co=this.yp=this.$m=this.v6=this.fna=this.l7=this.Bsa=null};c.prototype.resizeTile=function(a,c){var e=this.Pf.querySelector(a);if(e){this.yp||(this.yp=[]);var f=this.yp;f.push(e);f.push(c);
this.Vqa=!0;this.$K()}};c.prototype.u3a=function(a,c){var e=this.jE();this.DL&&this.DL(e);var f=null;0<=c&&c<e.length&&(f=e[c]);this.Pf.insertBefore(a,f);this.$K()};c.prototype.T5a=function(a){if(a=this.Pf.querySelector(a))this.co||(this.co=[]),this.co.push(a),this.k7=!0,this.Pp!==c.Pea&&this.Pp!==c.yP?this.$K():this.k7=!1};c.prototype.i3a=function(a){if(a=this.Pf.querySelector(a))this.lr||(this.lr=[]),this.lr.push(a),this.gna=!0,this.$K()};c.prototype.l5a=function(){this.Vqa||this.gna||this.k7||
(this.wp&&(this.Il=this.wp("performing layout (resizeNotify)")),this.Or&&this.Or(),this.I7(!1),this.G7())};c.prototype.qq=function(){if(this.eta)return!1;this.jIa||(this.zHa=this.OHa?!1:c.vSa(c.R_[0],c.R_[1]),this.jIa=!0);return this.zHa};c.prototype.qW=function(){return null!=this.Pp||null!=this.$m&&0<this.$m.length};c.prototype.AV=function(){this.eta=!0;this.lWa(this.H7);for(var a=this.jE(),d=0;d<a.length;d++){var e=a[d];e.rI&&delete e.rI}this.$J?(clearTimeout(this.$J),this.$J=null,this.kS(null)):
this.zS?(this.zS=!1,this.kS(null)):this.YE?(clearTimeout(this.YE),this.YE=null,this.j7()):this.Pp===c.yP||null!=this.$m&&0<this.$m.length?this.iA(null):this.Pp===c.Qea&&this.k4(null);this.eta=!1};c.gNa=function(a){var d=c.AJ(a);return{zk:a.offsetWidth+(c.Ih(d.marginLeft)+c.Ih(d.marginRight)),jm:a.offsetHeight+(c.Ih(d.marginTop)+c.Ih(d.marginBottom))}};c.fNa=function(a){a=c.AJ(a);return{paddingLeft:c.Ih(a.paddingLeft),paddingRight:c.Ih(a.paddingRight),paddingTop:c.Ih(a.paddingTop),paddingBottom:c.Ih(a.paddingBottom),
borderLeftWidth:c.Ih(a.borderLeftWidth),borderRightWidth:c.Ih(a.borderRightWidth),borderTopWidth:c.Ih(a.borderTopWidth),borderBottomWidth:c.Ih(a.borderBottomWidth)}};c.AJ=function(a){var c=a.ownerDocument.defaultView,e=null;return e=c?c.getComputedStyle(a,null):a.currentStyle};c.Ih=function(a){return 0<a.length&&"auto"!=a?(a=parseInt(a,10),isNaN(a)&&(a=0),a):0};c.b0=function(a,c){if(a)for(var e=0;e<a.length;e++)if(a[e]==c)return e;return-1};c.vSa=function(a,c){var e=["gecko",16,"trident",6,"webkit",
533.1],f=e.length;if(0==f%2)for(var g=0;g<=f-2;g+=2)if(a==e[g]){if(c>=e[1+g])return!0;break}return!1};c.uMa=function(){var a=c.pn,d=null,e=-1,f=navigator.userAgent.toLowerCase();-1!=f.indexOf("msie")||-1!=f.indexOf("trident")?(d="trident",e=a(f,/trident\/(\d+[.]\d+)/),-1==e&&(e=a(f,/msie (\d+\.\d+);/),-1==e&&(e=a(f,/msie (\d+\.\d+)b;/)),e-=4),null!=document.documentMode&&(e=Math.min(e,document.documentMode-4))):-1!=f.indexOf("applewebkit")?(d="webkit",e=a(f,/applewebkit\/(\d+([.]\d+)*)/)):-1!=f.indexOf("gecko/")&&
(d="gecko",e=a(f,/rv:(\d+[.]\d+)/));return[d,e]};c.pn=function(a,c){var e=a.match(c);return e&&(e=e[1])?parseFloat(e):-1};c.mJa=function(a,c){return a.zX>c.zX?1:a.zX<c.zX?-1:a.yX>c.yX?1:a.yX<c.yX?-1:0};c.prototype.$K=function(){this.AS||(this.Pp?this.X5||(this.X5=!0):(this.wp&&(this.Il=this.wp("performing layout")),this.AS=setTimeout(this.fna,0)))};c.prototype.jE=function(){for(var a=this.Pf.querySelectorAll(this.cZa),c=[],e=0;e<a.length;e++){var f=a[e],g=f.style;0<f.offsetWidth&&0<f.offsetHeight&&
"hidden"!=g.visibility&&c.push(f)}return c};c.prototype.G7=function(){var a=this.$m,d=this.jg();if(this.yp){var e=this.yp;d||(d=[]);for(var f=0;f<e.length;f+=2){var g=e[f];0>c.b0(d,g)&&d.push(g)}}e=!1;if(!d||1>d.length){if(!a||1>a.length)this.$m=null,this.iA(null),e=!0}else this.$m=d;a=null!=d&&0<d.length;this.qq()||e||this.iA(null);return a};c.prototype.jg=function(){var a=this.Pf,d=this.jE();this.DL&&this.DL(d);var e=this.II=null;this.hw=0;this.Oa=1;this.BE=null;var f=[],g=[],k=[],l=this.fj,m=c.fNa(a),
p=0,t=[];this.wga=t;for(var s=0;s<d.length;s++){var n=d[s];n.rI&&(this.II=n.rI,delete n.rI);var q=this.Zla(n);this.II||(this.II=this.kIa(n,q));e=this.II;this.BE||(this.hw=Math.max(Math.floor((a.offsetWidth-m.paddingLeft-m.paddingRight-m.borderLeftWidth-m.borderRightWidth)/e.zk),1),this.GRa(this.hw,this.Oa),p=this.hw);q.colSpan>p&&(p=q.colSpan);q.colSpan>this.hw&&(q.colSpan=this.hw);for(var r=!1,u=0;u<this.Oa;u++){for(var w=0;w<this.hw;w++)if(this.jMa(w,u,q)){var r=n.style,v={top:r.top};l?v.right=
r.right:v.left=r.left;g.push(v);this.M5(n,w,u,q,e,m);l&&k.push(w);r=!0;t.push({yX:w,zX:u,tile:n});break}if(r)break;u===this.Oa-1&&this.Zfa()}}if(e&&(a=this.l7.style)){p*=e.zk;e=this.Oa*e.jm;k=a.width?c.Ih(a.width.toString()):0;m=a.height?c.Ih(a.height.toString()):0;if(k>p||m>e)this.qD={},this.qD.width=p+"px",this.qD.height=e+"px";a.width=(k>p?k:p)+"px";a.height=(m>e?m:e)+"px"}for(s=0;s<d.length;s++)n=d[s],r=n.style,v=g[s],""!=v.top&&(l&&parseInt(r.right,10)!==parseInt(v.right,10)||!l&&parseInt(r.left,
10)!==parseInt(v.left,10)||parseInt(r.top,10)!==parseInt(v.top,10))&&(f.push(n),this.eT&&0>c.b0(this.yp,n)&&this.oga(n,this.q6?"reorder":"move"));1>f.length&&(f=null);return f};c.prototype.VZa=function(){if(this.qD){var a=this.l7.style;a.width=this.qD.width;a.height=this.qD.height;delete this.qD}};c.prototype.Kqa=function(){var a=this.wga;this.wga=null;for(var a=a.sort(c.mJa),d=this.jE(),e=0;e<d.length;e++){var f=d[e],g=a[e].tile;f!=g&&(this.cF(g),f.parentNode.insertBefore(g,f),this.bF(g),f=c.b0(d,
g),f>e&&(d.splice(f,1),d.splice(e,0,g)))}};c.prototype.GRa=function(a,c){for(var e=this.BE=[],f=0;f<c;f++){var g=[];e.push(g);for(var k=0;k<a;k++)g[k]=!1}};c.prototype.Zfa=function(){this.Oa++;var a=[];this.BE.push(a);for(var c=0;c<this.hw;c++)a[c]=!1};c.prototype.jMa=function(a,c,e){var f=e.colSpan;e=e.rowSpan;for(var g=c;g<c+e;g++){g>=this.Oa&&this.Zfa();for(var k=a;k<a+f;k++)if(k>=this.hw||this.BE[g][k])return!1}return!0};c.prototype.M5=function(a,c,e,f,g,k){var l=f.colSpan;f=f.rowSpan;for(var m=
this.BE,p=e;p<e+f;p++)for(var t=c;t<c+l;t++)m[p][t]=!0;a=a.style;a.top=k.paddingTop+e*g.jm+"px";this.fj?a.right=k.paddingRight+c*g.zk+"px":a.left=k.paddingLeft+c*g.zk+"px"};c.prototype.lWa=function(a){for(var c=this.jE(),e=0;e<c.length;e++)this.Rr(c[e],a)};c.prototype.oga=function(a,c){if(this.qq()){var e=this;e.VA(a,c).then(function(){e.eT&&e.iA(a)})}};c.prototype.I7=function(a){this.eT||(this.q6=a,this.eT=!0)};c.prototype.iA=function(a){var d=!0;if(this.$m){var e=this.$m;if(a)for(var f=0;f<e.length;f++){if(a===
e[f]){e=this.$m=[];break}}else this.qq()||(e=this.$m=[]);0<e.length&&(d=!1)}if(d){if(this.yp&&(a=this.yp,this.yp=null,this.qq()))for(f=0;f<a.length;f+=2);this.q6&&(this.q6=!1);this.k7=this.gna=this.Vqa=this.eT=!1;this.Kqa();this.vE&&this.vE();this.VZa();if(this.Pp===c.yP)if(this.qq()){var g=this;this.YE=setTimeout(function(){g.j7()},0)}else this.j7();else this.Pp||this.Zw&&this.Zw(this.v6)}};c.prototype.kIa=function(a,d){var e=c.gNa(a);return{zk:e.zk/d.colSpan,jm:e.jm/d.rowSpan}};c.prototype.jRa=
function(){this.AS&&(clearTimeout(this.AS),this.AS=null);this.Or&&this.Or();this.Pp=c.Pea;if(this.lr&&this.qq()){var a=this.lr,d=this;this.zS=!0;for(var e=0;e<a.length;e++){var f=a[e];this.VA(f,"remove").then(function(){d.kS(f)})}}else this.kS(null)};c.prototype.kS=function(a){this.$J?(clearTimeout(this.$J),this.$J=null):this.zS&&(this.zS=!1);if(a){var d=this.lr;if(d){for(var e=0;e<d.length;e++){var f=d[e];if(f===a){d.splice(e,1);this.Gt||(this.Gt=[]);var g=this.Gt;g.push(a);break}}1>d.length&&(this.lr=
null)}}else if(!this.qq()&&(d=this.lr)){for(e=0;e<d.length;e++)f=d[e],this.Gt||(this.Gt=[]),g=this.Gt,g.push(f);this.lr=null}if(!this.lr){if(this.Gt){g=this.Gt;for(e=0;e<g.length;e++)a=g[e],d=a.style,this.fj?d.right="":d.left="",d.top="",this.mE&&this.mE(a);this.Gt=null}this.Pp=c.yP;this.I7(!1);if(this.yp)for(g=this.yp,e=0;e<g.length;e+=2)a=g[e],d=g[e+1],f=this.Ola(a),this.qq()&&(a.rI=this.II,this.oga(a,"resize")),this.Rr(a,f),this.kr(a,d);this.G7()}};c.prototype.j7=function(){this.YE&&(clearTimeout(this.YE),
this.YE=null);this.Pp=c.Qea;if(this.co&&this.qq())for(var a=this,d=this.co,e=0;e<d.length;e++){var f=d[e];this.Rr(f,this.H7);this.VA(f,"insert").then(function(){a.k4(f)})}else{if(this.co)for(d=this.co,e=0;e<d.length;e++)f=d[e],this.Rr(f,this.H7);this.k4(null)}};c.prototype.k4=function(a){if(a){var c=this.co;if(c){for(var e=0;e<c.length;e++){var f=c[e];if(f===a){c.splice(e,1);this.px&&this.px(a);break}}1>c.length&&(this.co=null)}}else if(!this.qq()&&(c=this.co)){for(e=0;e<c.length;e++)f=c[e],this.px&&
this.px(f);this.co=null}this.co||(this.Pp=null,this.Zw&&this.Zw(this.v6),this.X5&&(this.X5=!1,this.$K()))};c.prototype.xf=function(){this.Il&&(this.Il(),this.Il=null)};c.Pea=1;c.yP=2;c.Qea=3;a.J.Ua("oj-masonry-layout","baseComponent",{properties:{reorderHandle:{type:"string"}},methods:{insertTile:{},removeTile:{},resizeTile:{}},events:{animateEnd:{},animateStart:{},beforeInsert:{},beforeRemove:{},beforeReorder:{},beforeResize:{},insert:{},remove:{},reorder:{},resize:{}},extension:{Xa:"ojMasonryLayout"}});
a.J.register("oj-masonry-layout",{metadata:a.J.getMetadata("oj-masonry-layout")})});