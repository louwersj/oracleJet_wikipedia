/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","knockout","ojs/ojmodel"],function(a,g){a.Hb=function(){};o_("KnockoutUtils",a.Hb,a);a.Hb.b$="oj._internalObj";a.Hb.wm="oj._underUpdate";a.Hb.AF="oj.collectionUpdating";a.Hb.Maa="oj.collectionSubscription";a.Hb.Waa="oj.collectionUpdatingFunc";a.Hb.map=function(c,b,d){function e(b){return function(d){f[a.Hb.wm]||c.set(b,d)}}var f,h,k,l;if(c instanceof a.t){h=Array(c.Hg());f=d?g.observableArray(h):h;a.Hb.Msa(f,c);if(d)for(h=0;h<c.Qd.length;h++)k=c.Qd[h],f()[k]=a.Hb.map(c.Ht(k,null,
!0,!1),b);else for(h=0;h<c.Qd.length;h++)k=c.Qd[h],f[k]=a.Hb.map(c.Ht(k,null,!0,!1),b);h=function(b){var d;try{if(!f[a.Hb.wm]){f[a.Hb.AF]=!0;for(d=0;d<b.length;d++){var e=b[d].index,g=a.Hb.Cd(b[d].value),h=b[d].status;"added"===h?e>=c.length-1?c.add(g):c.add(g,{at:e}):"deleted"===h&&c.OA(g,e)}c.comparator&&(f[a.Hb.wm]=!0,f.sort(function(b,d){return a.Hb.fha(b,d,c.comparator,c,this)}),f[a.Hb.wm]=!1)}}catch(k){throw k;}finally{f[a.Hb.AF]=!1}};d&&f.subscribe&&(f[a.Hb.Waa]=h,f[a.Hb.Maa]=f.subscribe(h,
null,"arrayChange"));d=function(b,c,d){var e;try{!f[a.Hb.AF]&&c instanceof a.t&&(f[a.Hb.wm]=!0,e=d.index,f.splice(e,1))}catch(g){throw g;}finally{f[a.Hb.wm]=!1}};h=function(c,d,e){var g,h;try{if(!f[a.Hb.AF]&&d instanceof a.t&&(f[a.Hb.wm]=!0,g=d.oTa(c),void 0!==g&&-1<g))if(h=a.Hb.map(c,b),e.fillIn){for(var k=Array.isArray(f)?f.length:f().length;k<g;k++)f.splice(k,0,a.Hb.map(d.Ht(k,null,!0,!1),b));f.splice(g,1,h)}else f.splice(g,0,h)}catch(l){throw l;}finally{f[a.Hb.wm]=!1}};k=function(b){try{!f[a.Hb.AF]&&
b instanceof a.t&&(f[a.Hb.wm]=!0,g.isObservable(f)?(f[a.Hb.Maa]&&f[a.Hb.Maa].dispose(),f.removeAll(),f[a.Hb.Waa]&&f.subscribe(f[a.Hb.Waa],null,"arrayChange")):f=[])}catch(c){throw c;}finally{f[a.Hb.wm]=!1}};l=function(b){try{!f[a.Hb.AF]&&b instanceof a.t&&(f[a.Hb.wm]=!0,f.sort(function(d,e){return a.Hb.fha(d,e,c.comparator,b,this)}))}catch(d){throw d;}finally{f[a.Hb.wm]=!1}};c.dt(a.xa.ga.ADD,h,void 0,void 0,!0);c.dt(a.xa.ga.REMOVE,d,void 0,void 0,!0);c.dt(a.xa.ga.RESET,k,void 0,void 0,!0);c.dt(a.xa.ga.SORT,
l,void 0,void 0,!0)}else{if(void 0===c)return;f={};d=c.attributes;h=null;for(h in d)d.hasOwnProperty(h)&&(k=g.observable(c.get(h)),f[h]=k,l=e(h),l.k8a=h,k.subscribe&&k.subscribe(l));d=function(b){var c,d;try{for(d in f[a.Hb.wm]=!0,c=b.B8(),c)if(c.hasOwnProperty(d))f[d](b.get(d))}catch(e){throw e;}finally{f[a.Hb.wm]=!1}};c.dt(a.xa.ga.CHANGE,d,void 0,void 0,!0);a.Hb.Msa(f,c);b&&b(f)}return f};o_("KnockoutUtils.map",a.Hb.map,a);a.Hb.Cd=function(c){return c instanceof a.U?c:c.hasOwnProperty(a.Hb.b$)?
c[a.Hb.b$]:c};a.Hb.fha=function(c,b,d,e,f){return a.t.Oca(a.Hb.Cd(c),a.Hb.Cd(b),d,e,f)};a.Hb.Msa=function(c,b){Object.defineProperty(c,a.Hb.b$,{value:b,enumerable:!1})}});