/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","knockout","ojs/ojknockout","ojs/ojmessaging"],function(a,g,c){a.cd=function(){};a.cd.BH="invalidComponentTracker";a.cd.Qda="ojoptionchange";a.cd.yt="messagesShown";a.cd.Uv="messagesHidden";a.cd.er="disabled";a.cd.SH="readOnly";a.cd.vx=function(b,d,e,f,h){var k={};h=h.call()[a.cd.BH];var g;if(b===a.cd.er||b===a.cd.SH)return g=h&&h.peek()||null,null!==g&&c.isWriteableObservable(h)&&g.vx.call(g,f,e,b,d)&&h.valueHasMutated(),k[b]=d,k};a.cd._init=function(a,c){var e={};e[a]=
c;return e};a.cd.qHa=function(b,c,e,f){f=f.call();var h;b===a.cd.BH&&(h=f[b]?!0:!1)&&a.cd.AVa(b,f,c,e);return{}};a.cd.VHa=function(b,d,e,f){d=g(d);f=f.call()[b];b===a.cd.BH&&d&&(d.off(a.cd.Qda,a.cd.Bta),f&&c.isWriteableObservable(f)&&(b=f.peek(),b.sf.call(b,e)&&f.valueHasMutated()))};a.cd.Bta=function(b,d){var e=b.data.Saa,f,h=b.data.W,k=b.data.element,g=d.option,m=d.value;(g===a.cd.yt||g===a.cd.Uv)&&e&&c.isWriteableObservable(e)&&(f=e.peek())&&f.vx.call(f,h,k,g,m)&&e.valueHasMutated()};a.cd.AVa=
function(b,d,e,f){d=d[b];var h,k,l;b=g(e);if(c.isObservable(d))l=d.peek(),null==l&&(l=new a.td,d(l));else throw Error("Binding attribute "+a.cd.BH+" should be bound to a ko observable.");null!==l&&(c.isWriteableObservable(d)&&(h=f.call(f,"option",a.cd.yt),k=f.call(f,"option",a.cd.Uv),l.vx.call(l,f,e,a.cd.yt,h),l.vx.call(l,f,e,a.cd.Uv,k),d.valueHasMutated()),e={Saa:d,W:f,element:e},b.on(a.cd.Qda,e,a.cd.Bta))};a.Ba.ph().uh({"for":"editableValue",attributes:[a.cd.BH,a.cd.er,a.cd.SH],init:a.cd._init,
update:a.cd.vx,afterCreate:a.cd.qHa,beforeDestroy:a.cd.VHa});a.td=function(){this.Init()};o_("InvalidComponentTracker",a.td,a);a.f.va(a.td,a.f,"oj.InvalidComponentTracker");a.td.yt="messagesShown";a.td.Uv="messagesHidden";a.td.er="disabled";a.td.SH="readOnly";a.td.prototype.Init=function(){a.td.N.Init.call(this);this.lF=[];this.Pw=[];this.nE=[];this.invalidHidden=this.invalidShown=!1};a.td.prototype.hva=function(){var b=null,c=this,e=this.JU,f;f=a.Context.w9().Rc().Vc({description:"Setting Focus to first invalid component."});
this.invalidShown&&(b=this.I2());setTimeout(function(){(b=e===c.JU?b||c.I2():c.I2())&&b.call(b,"Focus");f()},1);return b?!0:!1};a.f.j("InvalidComponentTracker.prototype.focusOnFirstInvalid",{hva:a.td.prototype.hva});a.td.prototype.showMessages=function(){var a,c,e;if(this.invalidHidden)for(c=this.nE.length,a=0;a<c;a++)this.nE[a]&&(e=this.lF[a].component.call(e,"showMessages"))};a.f.j("InvalidComponentTracker.prototype.showMessages",{showMessages:a.td.prototype.showMessages});a.td.prototype.I2=function(){for(var a,
c=0,e=[],f=this.Pw.length,c=0;c<f;c++)(a=this.Pw[c])&&e.push(this.lF[c]);if(0===e.length)return null;e.sort(function(a,b){return a.element.compareDocumentPosition(b.element)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1});return e[0].component};a.td.prototype.sf=function(a){var c=-1,e=!1;g.each(this.lF,function(e,h){0>c&&h.component===a&&(c=e)});0<=c&&(this.lF.splice(c,1),this.Pw.splice(c,1),this.nE.splice(c,1),this.a8(),e=!0);return e};a.td.prototype.vx=function(b,c,e,f){var h=b.call(b,"isValid"),k=!0,l,
m=-1;g.each(this.lF,function(a,c){0>m&&c.component===b&&(m=a)});switch(e){case a.td.yt:case a.td.Uv:l=!1;f&&(0>m&&(m=this.lF.push({component:b,element:c})-1,this.VRa(m,l)),!h&&a.td.s4(f)&&(l=!0,e===a.td.yt&&(c=b.call(b,"option",a.td.er),f=b.call(b,"option",a.td.SH),l=c||f?!1:!0)),k=this.YL(e,m||0,l),this.a8(),k&&(void 0===this.JU&&(this.JU=0),this.JU++));break;case a.td.er:case a.td.SH:k=!1,f&&(k=this.YL(a.td.yt,m||0,!1),k=this.YL(a.td.Uv,m||0,!1)||k,this.a8())}return k};a.td.prototype.VRa=function(b,
c){void 0===this.Pw[b]&&this.YL(a.td.yt,b,c);void 0===this.nE[b]&&this.YL(a.td.Uv,b,c)};a.td.prototype.a8=function(){this.invalidShown=0<=this.Pw.indexOf(!0);this.invalidHidden=0<=this.nE.indexOf(!0)};a.td.prototype.YL=function(b,c,e){var f=!1;b=b===a.td.yt?this.Pw:b===a.td.Uv?this.nE:[];0<=c&&void 0!==b[c]?(f=b[c]!==e?!0:!1)&&(b[c]=e):(b.push(e),f=!0);return f};a.td.s4=function(b){return!a.ya.isValid(b)}});